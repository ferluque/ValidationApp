<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>EarthCul Validation App</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script>
        function changeOption(e) {
            var option = e.target.getAttribute("option");
            // console.log(option);
            const optionsList = document.getElementById("optionsList");
            const contentList = document.getElementById("contentList");
            for (const child of optionsList.children) {
                child.children[0].classList.remove("active");
            }
            for (const child of contentList.children) {
                child.style.display = "none";
            }
            document.getElementById("changeOption" + option).classList.add("active");
            console.log(document.getElementById("content" + option));
            document.getElementById("content" + option).style.display = "block";
            console.log(document.getElementById("content" + option));
        }
    </script>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <div class="container">
        <div class="row">
            <div class="col text-center">
                <a target="_blank" href="https://decsai.ugr.es"><img class="img-fluid"
                        style="max-height: 100px; padding-top: 15px"
                        src="{{url_for('static', path='/logos/decsai.png')}}"></a>
            </div>
            <div class="col text-center">
                <a target="_blank" href="https://ugr.es"><img class="img-fluid"
                        style="max-height: 100px; padding-top: 15px"
                        src="{{url_for('static', path='/logos/ugr.png')}}"></a>
            </div>
            <div class="col text-center">
                <a target="_blank" href="https://fciencias.ugr.es"><img class="img-fluid"
                        style="max-height: 100px; padding-top: 15px"
                        src="{{url_for('static', path='/logos/fciencias.png')}}"></a>
            </div>
        </div>
        <div class="row">
            <hr style="margin-bottom: 25px; margin-top: 25px;" />
        </div>
        <div class="row">
            <div class="col-2">
                <form action="/statistics" method="get"><button type="submit" action="/statistics"
                        class="btn btn-outline-secondary">Go Back</button></form>
            </div>
            <div class="col-10"></div>
            <div class="col-2"></div>
            <div class="col-8">
                <h3 style="margin-bottom: 20px">{{name}}</h3>
                <ul class="nav nav-tabs" id="optionsList">
                    {% for option in figs.keys() %}
                    {% if loop.index==1 %}
                    <li class="nav-item">
                        <a class="nav-link active" id="changeOption{{option}}" aria-current="page" option="{{option}}"
                            onclick="changeOption(event)">{{option}}</a>
                    </li>
                    {% elif figs[option] %}
                    <li class="nav-item">
                        <a class="nav-link" id="changeOption{{option}}" aria-current="page" option="{{option}}"
                            onclick="changeOption(event)">{{option}}</a>
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>
                <div id="contentList">
                    {% for option in figs.keys() %}
                    {% if loop.index==1 %}
                    <div id="content{{option}}">
                        <form method="post" action="/getFileStatistic" style="margin-top: 20px">
                            <input type="hidden" name="name" value="{{name}}">
                            <input type="hidden" name="option" value="{{option}}">
                            <button type="submit" class="btn btn-success" style="margin-bottom: 20px">Export EXCEL file</button>
                        </form>
                        {% for level in figs[option] %}                        
                        {{level|safe}}
                        {% endfor %}
                    </div>
                    {% elif figs[option] %}
                    <div id="content{{option}}" style="display:none;">
                        {% for level in figs[option] %}
                        {{level|safe}}
                        {% endfor %}
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div class="col-2"></div>
        </div>
    </div>
</body>

</html>